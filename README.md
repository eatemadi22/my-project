# پروژه نظرسنجی - نسخه پیشرفته

ویژگی‌های اضافه شده:
- پشتیبانی فونت فارسی (Vazir از CDN)
- UI شکیل و mobile-friendly با Bootstrap
- سوال 2 چند گزینه‌ای (چک‌باکس) — متن راهنما نمایش داده می‌شود "(می‌توانید چند گزینه انتخاب کنید)"
- سوال 3: اگر "پیشنهاد دیگری دارم" انتخاب شود، کادر متنی باز می‌شود و متن در همان فیلد ذخیره می‌شود
- داشبورد مدیریت با:
  - ورود امن (نام کاربری/رمز با هش ذخیره می‌شود)
  - تغییر رمز از طریق پنل مدیریت
  - دانلود اکسل با **سر تیترهای فارسی** (ستون‌ها)
  - نمودارهای مجزا برای هر سوال (بِیان تصویری واضح‌تر)
- ذخیره محلی در SQLite (فایل `survey.db`)

## فایل‌ها
- `app.py` : برنامه اصلی
- `admin.json` : اطلاعات مدیر (در اولین اجرا ساخته می‌شود)
- `survey.db` : دیتابیس ایجاد می‌شود در اولین اجرا
- `templates/` : قالب‌های HTML

## اجرای لوکال
1. دانلود و استخراج ZIP
2. اطمینان از نصب Python 3.8+
3. نصب پکیج‌ها:
   ```
   pip install flask pandas matplotlib openpyxl werkzeug
   ```
4. اجرا:
   ```
   python app.py
   ```
   سپس در مرورگر به: `http://127.0.0.1:5000` بروید.

## ورود به پنل مدیریت
- آدرس: `http://127.0.0.1:5000/admin`
- یا ابتدا: `http://127.0.0.1:5000/admin/login`
- نام کاربری پیش‌فرض: `admin`
- رمز پیش‌فرض: `12345`
- **توصیه مهم:** پس از اولین ورود، حتماً از صفحه "تغییر رمز" برای قرار دادن یک رمز قوی استفاده کنید.

## امنیت و هشدارها
- رمزها بصورت هش‌شده در `admin.json` ذخیره می‌شوند.
- **هیچ سیستمی غیرقابل هک نیست.** برای امنیت بیشتر:
  - از یک secret_key قوی در متغیر محیطی `SURVEY_SECRET_KEY` استفاده کنید.
  - هنگام عمومی کردن با `ngrok` یا میزبانی روی سرور، حتماً HTTPS را فعال کنید و دسترسی به پنل مدیریت را محدود کنید.
  - بهتر است اپ را پشت یک reverse proxy (nginx) با TLS قرار دهید.

## عمومی کردن آدرس با ngrok
1. به https://ngrok.com بروید و حساب بسازید (رایگان).
2. ngrok را دانلود و نصب کن.
3. در ترمینال:
   ```
   ngrok http 5000
   ```
4. ngrok یک آدرس عمومی (مثلاً https://abcd-1234.ngrok.io) می‌دهد — این آدرس را در کانالت قرار بده.
5. **نکته امنیتی:** قبل از انتشار آدرس، رمز مدیریت را قوی کن و از ورود دیگران به `/admin` محافظت کن.